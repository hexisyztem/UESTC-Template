<!-- TOC -->

- [杂项](#杂项)
        - [long long范围内任意模数乘法(利用自然溢出)](#long-long范围内任意模数乘法利用自然溢出)
        - [状态压缩下的子集枚举](#状态压缩下的子集枚举)
        - [高维前缀和(子集求和/FMT)](#高维前缀和子集求和fmt)
        - [不平衡分块](#不平衡分块)
        - [股票问题](#股票问题)
        - [思维是否各维度可以独立](#思维是否各维度可以独立)
        - [位运算问题](#位运算问题)
        - [极大区间统计(问区间内有多少个子段)](#极大区间统计问区间内有多少个子段)
        - [找规律](#找规律)
        - [求N(1<=1e18)项数列的值](#求n11e18项数列的值)
        - [可重复组合](#可重复组合)
        - [BEST定理](#best定理)

<!-- /TOC -->
# 杂项
### long long范围内任意模数乘法(利用自然溢出)
``` C++
LL mul(LL a,LL b) {
    LL r = (a * b - (LL)(((long double)a * b) / mod) * mod);
    return add(r - r / mod * mod,mod);
}
```

### 状态压缩下的子集枚举

```C++
for(int i = s; i; i = (i-1) & s); //枚举s的子集，复杂度O(2^n)
for(int s = 1; s < (1<<n); s ++){
  for(int i = s; i; i = (i-1) & s){
    // 枚举所有集合s，并枚举s的所有子集
  }
}
```

### 高维前缀和(子集求和/FMT)
```C++
int all = 1 << n;
for (int i = 0; i < n; ++i) {
	for (int j = all - 1; j; --j) {
		if (j >> i & 1) a[j] += a[j ^ (1 << i)];
	}
}
```

### 不平衡分块
分块的时候要考虑询问次数，不要死记sqrt(m)

### 股票问题
对于购买区间[L,R]的股票可以看成第L天买入，第L+1天卖出，第L+1天买入，第L+2天卖出，...，将区间转化成单点问题

### 思维是否各维度可以独立
特别是在棋盘问题和二维平面中，如果可以独立思考可以方便的化简问题。

### 位运算问题
位运算问题的常用工具：SOSdp、线性基、FWT、字典树、按位考虑后类欧几里得、异或还可以考虑前缀和。

### 极大区间统计(问区间内有多少个子段)
考虑第一个变化的位置对答案的贡献，如果是区间询问可以特判第一位，从第二位开始。

### 找规律
注意循环节，二进制，组合数，阶乘，记得打表看一眼。

### 求N(1<=1e18)项数列的值
求N项的值的常用工具：找规律，循环节，矩乘，生成函数，BM，二进制分解。

### 可重复组合
$$
x^0+x^1+x^2+\cdots+x^m=\frac{1}{1-x}-\frac{x^{m+1}}{1-x}
$$
通过容斥求方法数

### BEST定理
对于图$G$，记 $T_i$为以$i$为根的内向树的数量，$d_i$为$i$号点的出度。对于一棵内向树，与$1$号点关联的出边有$d_1!$种，其余节点$i$对非树边指定顺序，有$d_i!$种。以$1$号点为起点和终点的欧拉路径的数量为：
$$
T_1d_1!\prod_{i=2}^{n}(d_i −1)!
$$
其中$T_1$可以利用矩阵树定理求出。即出度矩阵减去邻接矩阵去掉第一行第一列后行列式的值。时间复杂度为$O(n^3)$。

